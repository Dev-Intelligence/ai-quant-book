# 附录 B：量化系统的 12 种典型死亡方式

> **初级课程教你怎么赚钱，高级课程教你怎么死。**

---

## 为什么要学习"怎么死"

在机构量化培训中，有一条不成文的规矩：

> 新人入职第一周，先学公司历史上的失败案例。

原因很简单：
- 成功的策略各有各的不同
- 失败的策略往往死于同样的几种原因
- 知道怎么死，才能设计不会死的系统

本附录总结了量化系统最常见的 12 种死亡方式，每种包含定义、真实案例和预防措施。

> 注：带明确机构/事件名称的为公开事件；未指明具体对象的为合成示例，用于解释机制与风险模式。

---

## 死亡方式 1：数据污染型死亡

### 定义
系统使用了错误、缺失或被污染的数据，导致信号失真。

### 典型症状
- 回测很好，实盘突然亏损
- 某天开始策略行为异常
- 信号与市场完全相反

### 案例（示意）
> 2018 年，某团队的策略突然开始大亏。调查发现，数据提供商在某次更新后，将所有价格除以了 100（本应是日元，错标为美元）。系统以为价格暴跌 99%，疯狂做多。

### 预防措施
```
□ 数据质量检查管道（异常值、缺失值、跳变检测）
□ 多数据源交叉验证
□ 实时数据 vs 历史数据一致性检查
□ 数据变更告警机制
```

---

## 死亡方式 2：过拟合型死亡

### 定义
策略在历史数据上过度优化，记住了噪音而非信号。

### 典型症状
- 回测夏普 > 3，实盘夏普 < 0.5
- 换一段历史数据，结果完全不同
- 参数微调导致收益剧变

### 案例（示意）
> 某 ML 团队用 200 个特征训练模型，回测年化 80%。实盘第一个月亏损 15%。事后分析发现，模型学会了"每月第三个周二买入科技股"这种纯粹的历史巧合。

### 预防措施
```
□ 严格的样本外测试（OOS）
□ 限制特征数量 / 参数数量
□ 交叉验证 + Walk-forward 分析
□ 对过于"完美"的回测保持怀疑
```

---

## 死亡方式 3：Regime 漂移型死亡

### 定义
市场状态发生根本性变化，但策略仍按旧状态运行。

### 典型症状
- 曾经有效的策略突然失效
- 连续亏损超过历史最大回撤
- 信号方向与市场趋势持续相反

### 案例（示意）
> 2020-2021 年，很多价值因子策略持续亏损。原因是零利率环境下，成长股大幅跑赢价值股。坚持价值策略的基金回撤超过 50%。

### 预防措施
```
□ Regime Detection 模块
□ 策略收益与基准的滚动相关性监控
□ 多策略、多因子分散
□ 定期审视策略假设是否仍成立
```

---

## 死亡方式 4：执行失真型死亡

### 定义
回测假设与实盘执行存在系统性偏差。

### 典型症状
- 实盘收益远低于回测
- 滑点远超预期
- 订单经常无法成交

### 案例（示意）
> 某高频策略回测年化 200%。实盘发现：回测假设能在盘口第一档成交，实际延迟导致成交在第三档。这 0.1% 的差距，在 10000 次交易后，吃掉了全部利润。

### 预防措施
```
□ 保守的成本假设（滑点、冲击、延迟）
□ 用 Tick 数据回测，而非 K 线
□ 小资金实盘采样，校正回测模型
□ 区分"可预测的 Alpha"和"可捕获的 Alpha"
```

---

## 死亡方式 5：风控失效型死亡

### 定义
风控规则存在漏洞、被绕过或未执行。

### 典型症状
- 单笔亏损超过阈值
- 组合回撤触发熔断但系统未响应
- 止损单未执行

### 真实案例（公开事件）
> 2012 年，Knight Capital 因软件 bug 导致疯狂下单，45 分钟亏损 4.4 亿美元。风控系统本应阻止异常订单，但 bug 恰好绕过了检查。

### 预防措施
```
□ 风控与策略完全独立
□ 多层风控（头寸、组合、系统）
□ 风控不可被任何人绕过（包括创始人）
□ 定期风控演练（故意触发熔断）
```

---

## 死亡方式 6：流动性枯竭型死亡

### 定义
需要平仓时发现市场没有流动性。

### 典型症状
- 止损单无法执行
- 滑点远超正常水平
- 被迫以极差价格清仓

### 真实案例（公开事件）
> 2015 年 8 月 24 日，美股"闪崩"。很多 ETF 的价格瞬间下跌 20-30%，做市商撤单导致流动性真空。止损单以远低于预期的价格成交。

### 预防措施
```
□ 避免在单一标的集中持仓
□ 监控盘口深度，而非只看价格
□ 极端情况下的流动性压力测试
□ 保留现金应对追加保证金
```

---

## 死亡方式 7：相关性飙升型死亡

### 定义
危机时资产相关性趋近于 1，分散化失效。

### 典型症状
- "分散化"组合整体暴跌
- 所有策略同时亏损
- 对冲失效

### 真实案例（公开事件）
> 1998 年 LTCM 危机。他们的"不相关"策略在俄罗斯债务危机后全部同时亏损。所有套利策略都面临相同的流动性挤压，相关性从 0.2 飙升到 0.95。

### 预防措施
```
□ 压力测试使用"危机相关性"（假设相关性 → 1）
□ 保持真正不相关的资产（如国债、黄金）
□ 危机预警时主动降低风险敞口
□ 杠杆倍数考虑危机情景
```

---

## 死亡方式 8：杠杆爆仓型死亡

### 定义
杠杆使用过高，一次不利波动导致本金归零。

### 典型症状
- 保证金追缴无法满足
- 被强制平仓
- 本金损失超过 50%

### 真实案例（公开事件）
> 2021 年，Archegos Capital 使用 5 倍杠杆押注少数几只股票。当股价下跌 30% 时，触发保证金追缴和强制平仓。最终损失约 200 亿美元。

### 预防措施
```
□ 杠杆倍数上限（建议 < 2 倍）
□ 波动率调整杠杆（高波动时降低）
□ 保留 50% 保证金缓冲
□ 压力测试：假设波动率翻倍
```

---

## 死亡方式 9：人为干预型死亡

### 定义
人工干预系统决策，导致更大损失。

### 典型症状
- 手动取消止损单
- 在亏损时加仓"摊薄成本"
- 凭感觉覆盖系统信号

### 案例（示意）
> 某基金经理看到自动系统准备止损，认为"市场很快会反弹"，手动取消了止损单。结果市场继续下跌 20%。事后计算，止损可以避免 80% 的损失。

### 预防措施
```
□ 严格的操作流程（双人确认）
□ 人工干预需要书面理由和审批
□ 事后复盘所有人工干预的结果
□ 如果人工干预胜率 < 50%，禁止干预
```

---

## 死亡方式 10：系统故障型死亡

### 定义
技术问题导致系统无法正常运行。

### 典型症状
- 订单发送失败
- 行情数据中断
- 系统死机或延迟

### 真实案例（公开事件）
> 2012 年 Facebook IPO 当天，纳斯达克交易系统故障。很多订单未能正确处理，投资者不知道自己买了多少股。损失索赔超过 5 亿美元。

### 预防措施
```
□ 系统高可用设计（主备切换）
□ 实时健康监控和告警
□ 故障时的安全模式（只能平仓）
□ 定期灾难恢复演练
```

---

## 死亡方式 11：监管变化型死亡

### 定义
法规变化使策略不可行或违法。

### 典型症状
- 某类交易被禁止
- 税收政策改变利润计算
- 保证金要求提高

### 案例（示意）
> 2010 年后，多国禁止或限制裸卖空。很多依赖做空的中性策略被迫调整或关闭。2021 年中国限制教培行业后，相关股票暴跌，很多持仓策略亏损超过 90%。

### 预防措施
```
□ 分散策略类型和地区
□ 关注监管动态
□ 避免过度依赖单一政策环境
□ 预留应对监管变化的缓冲期
```

---

## 死亡方式 12：对手盘适应型死亡

### 定义
市场参与者学会了你的策略，并反向利用。

### 典型症状
- 策略收益逐渐衰减
- 似乎有人总是在你前面交易
- 曾经有效的信号变得无效

### 案例（示意）
> 某基金以稳定的均值回归策略闻名。对手盘发现后，开始在该基金预期买入的位置提前买入，抬高价格。然后在该基金买入后卖出。原本 1% 的 Alpha 逐渐变成 -0.5%。

### 预防措施
```
□ 分散信号来源和交易时间
□ 避免固定模式的交易
□ 监控策略容量和边际收益
□ 持续研发新策略替换衰减策略
□ 注意信息安全（不要透露策略细节）
```

---

## 死亡方式综合诊断表

当策略出现问题时，按照以下顺序排查：

| 优先级 | 检查项 | 对应死亡方式 |
|-------|-------|------------|
| 1 | 数据是否正常？ | #1 数据污染 |
| 2 | 市场状态是否变化？ | #3 Regime 漂移 |
| 3 | 执行是否正常？ | #4 执行失真 |
| 4 | 风控是否触发？ | #5 风控失效 |
| 5 | 流动性是否充足？ | #6 流动性枯竭 |
| 6 | 相关性是否正常？ | #7 相关性飙升 |
| 7 | 杠杆是否过高？ | #8 杠杆爆仓 |
| 8 | 是否有人工干预？ | #9 人为干预 |
| 9 | 系统是否正常运行？ | #10 系统故障 |
| 10 | 是否有监管变化？ | #11 监管变化 |
| 11 | 策略是否被学习？ | #12 对手盘适应 |
| 12 | 是否过拟合？ | #2 过拟合 |

---

## 每周健康检查清单

```
□ 数据质量检查通过
□ Regime 状态正常
□ 执行滑点在预期范围内
□ 风控阈值未触发
□ 流动性指标正常
□ 相关性矩阵无异常
□ 杠杆在限制范围内
□ 无异常人工干预
□ 系统健康度 100%
□ 无监管变化
□ Alpha 衰减在预期范围内
□ 样本外表现与预期一致
```

---

> **记住**：量化系统不是"设置好就不管"的东西。它需要持续监控、定期审计、不断进化。知道怎么死，才能活得更久。
