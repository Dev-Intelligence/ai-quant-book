<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 500">
  <style>
    .title { font: 600 14px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; }
    .subtitle { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; letter-spacing: 0.5px; }
    .box-text { font: 600 11px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; }
    .box-sub { font: 500 9px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; }
    .phase-label { font: 600 12px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; }
    .arrow-label { font: 400 9px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; }
    .section-label { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #fff; }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#1a1a1a"/>
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#60a5fa"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="680" height="500" fill="#fff"/>

  <!-- Title -->
  <text x="340" y="28" text-anchor="middle" class="title">多智能体架构中的执行模拟</text>
  <text x="340" y="44" text-anchor="middle" class="subtitle">EXECUTION SIMULATION IN MULTI-AGENT ARCHITECTURE</text>

  <!-- Main container -->
  <rect x="30" y="55" width="620" height="420" fill="none" stroke="#1a1a1a" stroke-width="1.5"/>

  <!-- Training Phase Section -->
  <rect x="40" y="65" width="600" height="175" fill="#a5f3fc" stroke="#1a1a1a" stroke-width="1" opacity="0.3"/>
  <rect x="40" y="65" width="100" height="22" fill="#67e8f9" stroke="#1a1a1a" stroke-width="1"/>
  <text x="90" y="80" text-anchor="middle" class="section-label">训练阶段</text>
  <text x="150" y="80" class="box-sub">TRAINING PHASE</text>

  <!-- Signal Agent -->
  <rect x="60" y="105" width="100" height="45" fill="#67e8f9" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="110" y="125" text-anchor="middle" class="box-text">Signal Agent</text>
  <text x="110" y="140" text-anchor="middle" class="box-sub">信号生成</text>

  <!-- Arrow: Signal to Simulator -->
  <line x1="160" y1="127" x2="195" y2="127" stroke="#1a1a1a" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <text x="177" y="120" text-anchor="middle" class="arrow-label">原始信号</text>

  <!-- Execution Simulator -->
  <rect x="205" y="105" width="130" height="45" fill="#5eead4" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="270" y="125" text-anchor="middle" class="box-text">Execution Simulator</text>
  <text x="270" y="140" text-anchor="middle" class="box-sub">模拟成交/滑点/部分成交</text>

  <!-- Arrow: Simulator to Cost -->
  <line x1="335" y1="127" x2="370" y2="127" stroke="#1a1a1a" stroke-width="1.5" marker-end="url(#arrowhead)"/>

  <!-- Cost Estimator -->
  <rect x="380" y="105" width="100" height="45" fill="#fde047" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="430" y="125" text-anchor="middle" class="box-text">Cost Estimator</text>
  <text x="430" y="140" text-anchor="middle" class="box-sub">净收益计算</text>

  <!-- Arrow: Cost to RL -->
  <line x1="480" y1="127" x2="515" y2="127" stroke="#1a1a1a" stroke-width="1.5" marker-end="url(#arrowhead)"/>

  <!-- RL Agent -->
  <rect x="525" y="105" width="100" height="45" fill="#f9a8d4" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="575" y="125" text-anchor="middle" class="box-text">RL Agent</text>
  <text x="575" y="140" text-anchor="middle" class="box-sub">学习成本感知策略</text>

  <!-- Training flow description -->
  <rect x="60" y="165" width="565" height="60" fill="#fff" stroke="#1a1a1a" stroke-width="1" stroke-dasharray="4,2"/>
  <text x="340" y="185" text-anchor="middle" class="box-sub">训练流程: 信号 → 模拟执行 → 计算净收益 → 策略学习</text>
  <text x="340" y="205" text-anchor="middle" class="box-sub">目标: 让 Agent 在训练时就考虑执行成本，避免理想化假设</text>

  <!-- Divider line -->
  <line x1="50" y1="250" x2="630" y2="250" stroke="#1a1a1a" stroke-width="2" stroke-dasharray="10,5"/>

  <!-- Production Phase Section -->
  <rect x="40" y="260" width="600" height="200" fill="#fbcfe8" stroke="#1a1a1a" stroke-width="1" opacity="0.3"/>
  <rect x="40" y="260" width="100" height="22" fill="#f9a8d4" stroke="#1a1a1a" stroke-width="1"/>
  <text x="90" y="275" text-anchor="middle" class="section-label">实盘阶段</text>
  <text x="150" y="275" class="box-sub">PRODUCTION PHASE</text>

  <!-- Execution Agent -->
  <rect x="60" y="300" width="100" height="45" fill="#f9a8d4" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="110" y="320" text-anchor="middle" class="box-text">Execution Agent</text>
  <text x="110" y="335" text-anchor="middle" class="box-sub">真实下单</text>

  <!-- Arrow to Live Log -->
  <line x1="160" y1="322" x2="195" y2="322" stroke="#1a1a1a" stroke-width="1.5" marker-end="url(#arrowhead)"/>

  <!-- Live Log -->
  <rect x="205" y="300" width="100" height="45" fill="#fde047" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="255" y="320" text-anchor="middle" class="box-text">实盘日志</text>
  <text x="255" y="335" text-anchor="middle" class="box-sub">收集成交数据</text>

  <!-- Arrow to Calibration -->
  <line x1="305" y1="322" x2="340" y2="322" stroke="#1a1a1a" stroke-width="1.5" marker-end="url(#arrowhead)"/>

  <!-- Calibration -->
  <rect x="350" y="300" width="100" height="45" fill="#5eead4" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="400" y="320" text-anchor="middle" class="box-text">模拟器校准</text>
  <text x="400" y="335" text-anchor="middle" class="box-sub">更新参数</text>

  <!-- Feedback arrow (curved back to training) -->
  <path d="M450,322 L500,322 Q550,322 550,280 L550,170 Q550,130 500,130"
        fill="none" stroke="#60a5fa" stroke-width="2" stroke-dasharray="6,3" marker-end="url(#arrowhead-blue)"/>
  <text x="570" y="230" class="arrow-label" transform="rotate(-90, 570, 230)">反馈闭环</text>

  <!-- Description in production -->
  <rect x="60" y="360" width="430" height="50" fill="#fff" stroke="#1a1a1a" stroke-width="1" stroke-dasharray="4,2"/>
  <text x="275" y="380" text-anchor="middle" class="box-sub">实盘流程: 真实交易 → 记录成交 → 校准模拟器</text>
  <text x="275" y="395" text-anchor="middle" class="box-sub">用实盘数据持续更新模拟器参数，形成闭环</text>

  <!-- Feedback label box -->
  <rect x="500" y="375" width="125" height="35" fill="#60a5fa" stroke="#1a1a1a" stroke-width="1" opacity="0.2"/>
  <rect x="500" y="375" width="125" height="35" fill="none" stroke="#60a5fa" stroke-width="1.5" stroke-dasharray="4,2"/>
  <text x="563" y="397" text-anchor="middle" class="box-text" style="fill:#1a1a1a">FEEDBACK LOOP</text>
</svg>